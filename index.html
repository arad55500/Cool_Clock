<!DOCTYPE html>
<html>
<head>
    <title>Cool Clock 1.2 by Arad Okanin</title>
    <style>
        body { 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background-color: black; 
            color: white; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        #dateDisplay, #todoTitle {
            font-size: 24px;
            margin-bottom: 10px;
        }
        #clock { 
            font-size: 48px; 
            margin-bottom: 20px;
        }
        .calendar, .todos {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        .day {
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2px;
            cursor: pointer;
        }
        .today {
            background-color: white;
            color: black;
            border-radius: 50%;
        }
        .controls, .todo-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        .todo-item {
            margin: 5px;
            color: black;
            background-color: white;
            padding: 5px;
            border-radius: 5px;
        }
        input, select, button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <div id="dateDisplay">MM/DD/YYYY</div>
    <div id="clock">00:00:00</div>
    <div class="calendar">
        <!-- Calendar days will be generated by JavaScript -->
    </div>
    <div id="todoTitle">To-Dos</div>
    <div class="todos">
        <!-- To-do items will be generated by JavaScript -->
    </div>
    <div class="todo-controls">
        <input type="text" id="todoInput" placeholder="Add new to-do">
        <button onclick="addTodo()">Add To-Do</button>
    </div>
    <!-- Add some UI for customization -->
    <div class="controls">
        <div class="control-item">
            Color: <input type="color" id="textColor" onchange="changeTextColor()">
        </div>
        <div class="control-item">
            Background: <input type="color" id="bgColor" onchange="changeBgColor()">
        </div>
        <div class="control-item">
            Font: <select id="fontSelect" onchange="changeFont()">
                <option value="Arial">Arial</option>
                <option value="Verdana">Verdana</option>
                <option value="Monospace">Monospace</option>
                <option value="David">David</option>
            </select>
        </div>
        <div class="control-item">
            Timezone: <select id="timezoneSelect" onchange="updateClock()">
                <option value="0">GMT</option>
                <option value="-5">EST</option>
                <option value="-8">PST</option>
                <option value="1">CET</option>
                <option value="9">JST</option>
            </select>
        </div>
    </div>
    <script>
        let selectedDate = new Date().toDateString();

        function updateClock() {
            const timezoneOffset = parseInt(document.getElementById('timezoneSelect').value) * 3600000;
            const now = new Date(new Date().getTime() + timezoneOffset);
            const month = (now.getUTCMonth() + 1).toString().padStart(2, '0');
            const day = now.getUTCDate().toString().padStart(2, '0');
            const year = now.getUTCFullYear();
            document.getElementById('dateDisplay').innerText = `${month}/${day}/${year}`;

            const hours = now.getUTCHours().toString().padStart(2, '0');
            const minutes = now.getUTCMinutes().toString().padStart(2, '0');
            const seconds = now.getUTCSeconds().toString().padStart(2, '0');
            document.getElementById('clock').innerText = `${hours}:${minutes}:${seconds}`;

            updateCalendar(now);
            displayTodos();
        }

        function updateCalendar(now) {
        const calendarContainer = document.querySelector('.calendar');
        calendarContainer.innerHTML = ''; // Clear previous calendar
        const daysInMonth = new Date(now.getUTCFullYear(), now.getUTCMonth() + 1, 0).getDate();
        const currentMonth = now.getUTCMonth();
        const currentYear = now.getUTCFullYear();

        for (let i = 1; i <= daysInMonth; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day';
            dayElement.textContent = i;
            // Update for selected date
            const isSelectedDate = new Date(selectedDate).getUTCDate() === i && 
                                    new Date(selectedDate).getUTCMonth() === currentMonth && 
                                    new Date(selectedDate).getUTCFullYear() === currentYear;
            if (isSelectedDate) {
                dayElement.classList.add('today'); // Use the 'today' class to highlight the selected date
            }
            dayElement.addEventListener('click', function() {
                selectDate(i, currentMonth, currentYear);
            });
            calendarContainer.appendChild(dayElement);
        }
    }

    function selectDate(day, month, year) {
        const date = new Date(Date.UTC(year, month, day));
        selectedDate = date.toDateString();
        displayTodos();
        updateClock(); // Call updateClock to refresh the calendar with the new selection
    }

        function displayTodos() {
        const todos = JSON.parse(localStorage.getItem(selectedDate) || '[]');
        const todosContainer = document.querySelector('.todos');
        todosContainer.innerHTML = ''; // Clear current todos
        todos.forEach((todo, index) => {
            const todoElement = document.createElement('div');
            todoElement.className = 'todo-item';
            todoElement.textContent = todo;
            todoElement.addEventListener('click', function() {
                removeTodo(index);
            });
            todosContainer.appendChild(todoElement);
        });
    }

    function addTodo() {
        const todoInput = document.getElementById('todoInput');
        if (todoInput.value.trim() === '') return;
        const todos = JSON.parse(localStorage.getItem(selectedDate) || '[]');
        todos.push(todoInput.value.trim());
        localStorage.setItem(selectedDate, JSON.stringify(todos));
        todoInput.value = ''; // Clear input
        displayTodos();
    }

    function removeTodo(index) {
        let todos = JSON.parse(localStorage.getItem(selectedDate) || '[]');
        todos.splice(index, 1); // Remove the todo item at the specified index
        localStorage.setItem(selectedDate, JSON.stringify(todos)); // Update localStorage
        displayTodos(); // Refresh the displayed list of todos
    }

        function changeTextColor() {
            const color = document.getElementById('textColor').value;
            document.body.style.color = color;
        }

        function changeBgColor() {
            const color = document.getElementById('bgColor').value;
            document.body.style.backgroundColor = color;
        }

        function changeFont() {
            const font = document.getElementById('fontSelect').value;
            document.body.style.fontFamily = font;
        }

        setInterval(updateClock, 1000);
        updateClock(); // Initial call to display the correct time immediately and generate the calendar
    </script>
</body>
</html>
